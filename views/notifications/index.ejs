<%- include('../partials/header') %>
</head>
<body class="bg-light">
  <%- include('../partials/nav') %>

  <main class="container py-5">
    <h3 class="text-primary text-center mb-4">
      <i class="bi bi-bell me-2"></i> Booking Notifications
    </h3>

    <% if (notifications.length === 0) { %>
      <p class="text-center text-muted">No notifications found.</p>
    <% } else { %>
      <% notifications.forEach(notification => { %>
        <div class="card shadow mb-3">
          <div class="card-body">
            <h5 class="card-title text-primary mb-3">
              <%= notification.bookingId?.propertyId?.title || 'No property title' %>
            </h5>

            <p><strong>Status:</strong> <%= notification.bookingId?.status || 'N/A' %></p>
            <p><strong>Message:</strong> <%= notification.message %></p>

            <div class="d-flex gap-2">
              <% if (notification.bookingUrl) { %>
                <a href="<%= notification.bookingUrl %>" class="btn btn-primary btn-sm">
                  <i class="bi bi-eye"></i> View Details
                </a>
              <% } %>

              <form action="/notifications/<%= notification._id %>?_method=DELETE" method="POST"
                    onsubmit="return confirm('Are you sure you want to delete this notification?');">
                <button type="submit" class="btn btn-danger btn-sm">
                  <i class="bi bi-trash"></i> Delete
                </button>
              </form>
            </div>
          </div>
        </div>
      <% }) %>
    <% } %>
  </main>
</body>
</html>
