<%- include('../partials/header') %>
</head>
<body class="bg-light">
  <%- include('../partials/nav') %>

  <main class="container py-5">
    <h3 class="text-primary text-center mb-4">
      <i class="bi bi-bell me-2"></i> Notifications
    </h3>

    <% if (notifications.length === 0) { %>
      <p class="text-center text-muted">No notifications found.</p>
    <% } else { %>
      <div class="list-group shadow-sm">
        <% notifications.forEach(n => { %>
          <div class="list-group-item list-group-item-action mb-3 rounded shadow-sm p-3">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="mb-0 text-primary">
                <i class="bi bi-house-door me-2"></i>
                <%= n.bookingId?.propertyId?.title || "Property Info" %>
              </h5>
              <small class="text-muted">
                <%= new Date(n.createdAt).toLocaleString() %>
              </small>
            </div>

            <p class="mb-2"><strong>Message:</strong> <%= n.message || 'No message' %></p>

            <div class="d-flex justify-content-end gap-2 mt-2">
              <a href="/notifications/view/<%= n._id %>" class="btn btn-outline-primary btn-sm">
                <i class="bi bi-eye"></i> View Details
              </a>
              <form action="/notifications/<%= n._id %>?_method=DELETE" method="POST" onsubmit="return confirm('Delete this notification?')">
                <button type="submit" class="btn btn-outline-danger btn-sm">
                  <i class="bi bi-trash"></i>
                </button>
              </form>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>
  </main>
</body>
</html>
